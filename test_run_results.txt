
[1m[94m======================================================================[0m
[1m[94mTicket Triage API - End-to-End Tests[0m
[1m[94m======================================================================[0m

[94m[INFO] Checking environment variables...[0m
[92m[OK] OPENAI_API_KEY found: sk-proj...fm8A[0m

[94m[INFO] Checking API health...[0m
[92m[OK] API is running and healthy[0m
[94m[INFO] Loading test cases from C:\Users\prate\Documents\Projects\p1-seafoam-cicada\interactions\phase1_demo.json...[0m
[92m[OK] Loaded 5 test conversations[0m

[1/5]

[1m[94m======================================================================[0m
[1m[94mTesting Conversation: P1-DEMO-001[0m
[1m[94m======================================================================[0m


----------------------------------------------------------------------
[94m[INFO] Turn 1: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: I'd like a refund for order ORD1001. The mouse is not working.[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: e8e3c8b4-aef3-497e-a642-0f499baf21d7
  Order ID: ORD1001
  Issue Type: refund_request
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Ava Chen, we are sorry for the inconvenience. We reviewed order ORD1001 and a refund will be proc...
[94m[INFO] Validating expected outcome...[0m
[92m[OK] Issue type: refund_request[0m
[92m[OK] Order ID: ORD1001[0m
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Ava Chen, we are sorry for the inconvenience. We reviewed order ORD1001 and a refund will be proc...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (148 chars)[0m
[94m[INFO]   Expected context: We identified a refund request for order ORD1001. Reviewing ...[0m
[94m[INFO]   Actual response: Hi Ava Chen, we are sorry for the inconvenience. We reviewed...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 2: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We identified a refund request for order ORD1001. Reviewing details...[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Turn 3: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: When will I get the refund?[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: e8e3c8b4-aef3-497e-a642-0f499baf21d7
  Order ID: ORD1001
  Issue Type: refund_request
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Ava Chen, thank you for your patience. The refund for order ORD1001 has been processed and should...
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Ava Chen, thank you for your patience. The refund for order ORD1001 has been processed and should...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (227 chars)[0m
[94m[INFO]   Expected context: Refund will be issued within 5 business days....[0m
[94m[INFO]   Actual response: Hi Ava Chen, thank you for your patience. The refund for ord...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 4: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: Refund will be issued within 5 business days.[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Conversation Summary: Processed 4 turns[0m
[92m[OK] All validations passed for P1-DEMO-001[0m
----------------------------------------------------------------------
[94m[INFO] Saved JSON output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-001_20260113_183237.json[0m
[94m[INFO] Saved text output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-001_20260113_183237.txt[0m

[2/5]

[1m[94m======================================================================[0m
[1m[94mTesting Conversation: P1-DEMO-002[0m
[1m[94m======================================================================[0m


----------------------------------------------------------------------
[94m[INFO] Turn 1: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: My Bluetooth speaker (ORD1002) has not arrived yet.[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: 09793b8a-d40d-45da-b063-bcd2f77afeee
  Order ID: ORD1002
  Issue Type: late_delivery
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi David Lee, we checked order ORD1002 and it shows that your package has been delivered. If you hav...
[94m[INFO] Validating expected outcome...[0m
[92m[OK] Issue type: late_delivery[0m
[92m[OK] Order ID: ORD1002[0m
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi David Lee, we checked order ORD1002 and it shows that your package has been delivered. If you hav...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (282 chars)[0m
[94m[INFO]   Expected context: We detected a late delivery for ORD1002. Checking status......[0m
[94m[INFO]   Actual response: Hi David Lee, we checked order ORD1002 and it shows that you...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 2: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We detected a late delivery for ORD1002. Checking status...[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Turn 3: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: Can you confirm delivery timing?[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: 09793b8a-d40d-45da-b063-bcd2f77afeee
  Order ID: ORD1002
  Issue Type: late_delivery
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi David Lee, we checked order ORD1002 and it shows that your package has been delivered. If you hav...
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi David Lee, we checked order ORD1002 and it shows that your package has been delivered. If you hav...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (282 chars)[0m
[94m[INFO]   Expected context: The package is in transit and expected to arrive soon....[0m
[94m[INFO]   Actual response: Hi David Lee, we checked order ORD1002 and it shows that you...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 4: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: The package is in transit and expected to arrive soon.[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Conversation Summary: Processed 4 turns[0m
[92m[OK] All validations passed for P1-DEMO-002[0m
----------------------------------------------------------------------
[94m[INFO] Saved JSON output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-002_20260113_183249.json[0m
[94m[INFO] Saved text output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-002_20260113_183249.txt[0m

[3/5]

[1m[94m======================================================================[0m
[1m[94mTesting Conversation: P1-DEMO-003[0m
[1m[94m======================================================================[0m


----------------------------------------------------------------------
[94m[INFO] Turn 1: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: The smart watch I got (ORD1004) is not working.[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: c6471fb4-b0e6-4386-a2bd-006d9b2c449e
  Order ID: ORD1004
  Issue Type: defective_product
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi John Smith, we are sorry your product is not working. We will honor the warranty for order ORD100...
[94m[INFO] Validating expected outcome...[0m
[92m[OK] Issue type: defective_product[0m
[92m[OK] Order ID: ORD1004[0m
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi John Smith, we are sorry your product is not working. We will honor the warranty for order ORD100...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (157 chars)[0m
[94m[INFO]   Expected context: We detected a defective product for ORD1004. Verifying warra...[0m
[94m[INFO]   Actual response: Hi John Smith, we are sorry your product is not working. We ...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 2: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We detected a defective product for ORD1004. Verifying warranty...[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Turn 3: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: Is a replacement possible?[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: c6471fb4-b0e6-4386-a2bd-006d9b2c449e
  Order ID: ORD1004
  Issue Type: defective_product
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi John Smith, we are sorry your product is not working. We will honor the warranty for order ORD100...
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi John Smith, we are sorry your product is not working. We will honor the warranty for order ORD100...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (259 chars)[0m
[94m[INFO]   Expected context: Yes. A replacement will be arranged under warranty....[0m
[94m[INFO]   Actual response: Hi John Smith, we are sorry your product is not working. We ...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 4: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: Yes. A replacement will be arranged under warranty.[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Conversation Summary: Processed 4 turns[0m
[92m[OK] All validations passed for P1-DEMO-003[0m
----------------------------------------------------------------------
[94m[INFO] Saved JSON output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-003_20260113_183300.json[0m
[94m[INFO] Saved text output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-003_20260113_183300.txt[0m

[4/5]

[1m[94m======================================================================[0m
[1m[94mTesting Conversation: P1-DEMO-004[0m
[1m[94m======================================================================[0m


----------------------------------------------------------------------
[94m[INFO] Turn 1: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: Wrong item shipped for order ORD1006.[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: 03d5d3df-9fca-4aff-ba15-76276d33d137
  Order ID: ORD1006
  Issue Type: wrong_item
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Carlos Gomez, looks like you received the wrong item for order ORD1006. We will arrange a replace...
[94m[INFO] Validating expected outcome...[0m
[92m[OK] Issue type: wrong_item[0m
[92m[OK] Order ID: ORD1006[0m
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Carlos Gomez, looks like you received the wrong item for order ORD1006. We will arrange a replace...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (155 chars)[0m
[94m[INFO]   Expected context: We found a wrong item issue for ORD1006. Creating replacemen...[0m
[94m[INFO]   Actual response: Hi Carlos Gomez, looks like you received the wrong item for ...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 2: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We found a wrong item issue for ORD1006. Creating replacement ticket...[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Turn 3: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: Do I need to return the wrong item first?[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: 03d5d3df-9fca-4aff-ba15-76276d33d137
  Order ID: ORD1006
  Issue Type: wrong_item
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Carlos Gomez, thank you for your question. You do not need to return the wrong item first; we wil...
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Carlos Gomez, thank you for your question. You do not need to return the wrong item first; we wil...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (222 chars)[0m
[94m[INFO]   Expected context: We will send a prepaid return label and ship the correct ite...[0m
[94m[INFO]   Actual response: Hi Carlos Gomez, thank you for your question. You do not nee...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 4: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We will send a prepaid return label and ship the correct item.[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Conversation Summary: Processed 4 turns[0m
[92m[OK] All validations passed for P1-DEMO-004[0m
----------------------------------------------------------------------
[94m[INFO] Saved JSON output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-004_20260113_183311.json[0m
[94m[INFO] Saved text output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-004_20260113_183311.txt[0m

[5/5]

[1m[94m======================================================================[0m
[1m[94mTesting Conversation: P1-DEMO-005[0m
[1m[94m======================================================================[0m


----------------------------------------------------------------------
[94m[INFO] Turn 1: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: Please check order ORD1005, one sleeve is missing.[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: b9facbd2-a3a3-4e40-bd50-fba8afd9a72f
  Order ID: ORD1005
  Issue Type: missing_item
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Emily Rivera, thanks for letting us know. We have escalated order ORD1005 to locate the missing s...
[94m[INFO] Validating expected outcome...[0m
[92m[OK] Issue type: missing_item[0m
[92m[OK] Order ID: ORD1005[0m
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Emily Rivera, thanks for letting us know. We have escalated order ORD1005 to locate the missing s...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (177 chars)[0m
[94m[INFO]   Expected context: We detected a missing item for ORD1005. Opening investigatio...[0m
[94m[INFO]   Actual response: Hi Emily Rivera, thanks for letting us know. We have escalat...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 2: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We detected a missing item for ORD1005. Opening investigation...[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Turn 3: USER[0m
----------------------------------------------------------------------
[94m[INFO] User message: How long will it take?[0m
[94m[INFO] Invoking triage endpoint...[0m
[94m[INFO] Triage Results:[0m
  Thread ID: b9facbd2-a3a3-4e40-bd50-fba8afd9a72f
  Order ID: ORD1005
  Issue Type: missing_item
  Draft Scenario: reply
  Review Status: pending
  Draft Reply: Hi Emily Rivera, thank you for your patience. We are currently working to locate the missing sleeve ...
[94m[INFO] Testing admin review (APPROVED)...[0m
[92m[OK] Admin review completed[0m
  Final Review Status: approved
  Final Reply: Hi Emily Rivera, thank you for your patience. We are currently working to locate the missing sleeve ...
[94m[INFO] Validating assistant response...[0m
[92m[OK] Response generated (288 chars)[0m
[94m[INFO]   Expected context: We will update you within 48 hours and ship the missing slee...[0m
[94m[INFO]   Actual response: Hi Emily Rivera, thank you for your patience. We are current...[0m

----------------------------------------------------------------------
[94m[INFO] Turn 4: ASSISTANT[0m
----------------------------------------------------------------------
[94m[INFO] Expected assistant message: We will update you within 48 hours and ship the missing sleeve.[0m
[94m[INFO] (Validation done in previous turn)[0m

----------------------------------------------------------------------
[94m[INFO] Conversation Summary: Processed 4 turns[0m
[92m[OK] All validations passed for P1-DEMO-005[0m
----------------------------------------------------------------------
[94m[INFO] Saved JSON output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-005_20260113_183322.json[0m
[94m[INFO] Saved text output: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\P1-DEMO-005_20260113_183322.txt[0m
[94m[INFO] Saved test summary: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\test_summary_20260113_183322.json and C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs\test_summary_20260113_183322.txt[0m

[1m[94m======================================================================[0m
[1m[94mTest Summary[0m
[1m[94m======================================================================[0m


Total Tests: 5
[92m[OK] Passed: 5[0m

Detailed Results:
  [92mPASS[0m - P1-DEMO-001
  [92mPASS[0m - P1-DEMO-002
  [92mPASS[0m - P1-DEMO-003
  [92mPASS[0m - P1-DEMO-004
  [92mPASS[0m - P1-DEMO-005
[94m[INFO] 
All conversation outputs saved to: C:\Users\prate\Documents\Projects\p1-seafoam-cicada\test_outputs[0m
[92m[OK] 
All tests passed![0m
